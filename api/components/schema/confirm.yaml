type: object
properties:
  context:
    allOf:
      - description: >-
          Every API call in beckn protocol has a context. It provides a
          high-level overview to the receiver about the nature of the intended
          transaction. Typically, it is the BAP that sets the transaction
          context based on the consumer's location and action on their UI. But
          sometimes, during unsolicited callbacks, the BPP also sets the
          transaction context but it is usually the same as the context of a
          previous full-cycle, request-callback interaction between the BAP and
          the BPP. The context object contains four types of fields.
          <ol><li>Demographic information about the transaction using fields
          like `domain`, `country`, and `region`.</li><li>Addressing details
          like the sending and receiving platform's ID and API
          URL.</li><li>Interoperability information like the protocol version
          that implemented by the sender and,</li><li>Transaction details like
          the method being called at the receiver's endpoint, the transaction_id
          that represents an end-to-end user session at the BAP, a message ID to
          pair requests with callbacks, a timestamp to capture sending times, a
          ttl to specifiy the validity of the request, and a key to encrypt
          information if necessary.</li></ol> This object must be passed in
          every interaction between a BAP and a BPP. In HTTP/S implementations,
          it is not necessary to send the context during the synchronous
          response. However, in asynchronous protocols, the context must be sent
          during all interactions,
        type: object
        properties:
          domain:
            description: Domain code that is relevant to this transaction context
            allOf:
              - description: >-
                  Standard code representing the domain. The standard is usually
                  published as part of the network policy. Furthermore, the
                  network facilitator should also provide a mechanism to provide
                  the supported domains of a network.
          location:
            description: The location where the transaction is intended to be fulfilled.
            allOf:
              - &ref_16
                description: The physical location of something
                type: object
                properties:
                  id: &ref_17
                    type: string
                  descriptor: &ref_4
                    description: Physical description of something.
                    type: object
                    properties:
                      name:
                        type: string
                      code:
                        type: string
                      short_desc:
                        type: string
                      long_desc:
                        type: string
                      additional_desc:
                        type: object
                        properties:
                          url:
                            type: string
                          content_type:
                            type: string
                            enum:
                              - text/plain
                              - text/html
                              - application/json
                      media:
                        type: array
                        items: &ref_26
                          description: This object contains a url to a media file.
                          type: object
                          properties:
                            mimetype:
                              description: >-
                                indicates the nature and format of the document,
                                file, or assortment of bytes. MIME types are
                                defined and standardized in IETF's RFC 6838
                              type: string
                            url:
                              description: The URL of the file
                              type: string
                              format: uri
                            signature:
                              description: >-
                                The digital signature of the file signed by the
                                sender
                              type: string
                            dsa:
                              description: The signing algorithm used by the sender
                              type: string
                      images:
                        type: array
                        items: &ref_9
                          description: Describes an image
                          type: object
                          properties:
                            url:
                              description: >-
                                URL to the image. This can be a data url or an
                                remote url
                              type: string
                              format: uri
                            size_type:
                              description: >-
                                The size of the image. The network policy can
                                define the default dimensions of each type
                              type: string
                              enum:
                                - xs
                                - sm
                                - md
                                - lg
                                - xl
                                - custom
                            width:
                              description: Width of the image in pixels
                              type: string
                            height:
                              description: Height of the image in pixels
                              type: string
                  map_url:
                    description: >-
                      The url to the map of the location. This can be a globally
                      recognized map url or the one specified by the network
                      policy.
                    type: string
                    format: uri
                  gps:
                    description: The GPS co-ordinates of this location.
                    allOf:
                      - &ref_0
                        description: Describes a GPS coordinate
                        type: string
                        pattern: >-
                          ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
                  address:
                    description: The address of this location.
                    allOf:
                      - &ref_13
                        description: Describes a postal address.
                        type: string
                  city:
                    description: The city this location is, or is located within
                    allOf:
                      - &ref_15
                        description: Describes a city
                        type: object
                        properties:
                          name:
                            description: Name of the city
                            type: string
                          code:
                            description: City code
                            type: string
                  district:
                    description: The state this location is, or is located within
                    type: string
                  state:
                    description: The state this location is, or is located within
                    allOf:
                      - &ref_14
                        description: >-
                          A bounded geopolitical region of governance inside a
                          country.
                        type: object
                        properties:
                          name:
                            type: string
                            description: Name of the state
                          code:
                            type: string
                            description: >-
                              State code as per country or international
                              standards
                  country:
                    description: The country this location is, or is located within
                    allOf:
                      - description: Describes a country
                        type: object
                        properties:
                          name:
                            type: string
                            description: Name of the country
                          code:
                            type: string
                            description: >-
                              Country code as per ISO 3166-1 and ISO 3166-2
                              format
                  area_code:
                    type: string
                  circle:
                    description: >-
                      Describes a circular region of a specified radius centered
                      at a specified GPS coordinate.
                    type: object
                    properties:
                      gps: *ref_0
                      radius: &ref_19
                        description: Describes a scalar
                        type: object
                        properties:
                          type:
                            type: string
                            enum:
                              - CONSTANT
                              - VARIABLE
                          value: &ref_1
                            description: Describes a numerical value in decimal form
                            type: string
                            pattern: '[+-]?([0-9]*[.])?[0-9]+'
                          estimated_value: *ref_1
                          computed_value: *ref_1
                          range:
                            type: object
                            properties:
                              min: *ref_1
                              max: *ref_1
                          unit:
                            type: string
                  polygon:
                    description: The boundary polygon of this location
                    type: string
                  3dspace:
                    description: The three dimensional region describing this location
                    type: string
                  rating:
                    description: The rating of this location
                    allOf:
                      - &ref_5
                        description: >-
                          Rating value given to the object. This can be a single
                          value or can also contain an inequality operator like
                          gt, gte, lt, lte. This can also contain an inequality
                          expression containing logical operators like && and
                          ||.
                        type: string
          action:
            description: >-
              The Beckn protocol method being called by the sender and executed
              at the receiver.
            type: string
          version:
            type: string
            description: Version of transaction protocol being used by the sender.
          bap_id:
            description: Subscriber ID of the BAP
            allOf:
              - &ref_2
                description: >-
                  A globally unique identifier of the platform, Typically it is
                  the fully qualified domain name (FQDN) of the platform.
                type: string
          bap_uri:
            description: Subscriber URL of the BAP for accepting callbacks from BPPs.
            allOf:
              - &ref_3
                description: >-
                  The callback URL of the Subscriber. This should necessarily
                  contain the same domain name as set in `subscriber_id``.
                type: string
                format: uri
          bpp_id:
            description: Subscriber ID of the BPP
            allOf:
              - *ref_2
          bpp_uri:
            description: Subscriber URL of the BPP for accepting calls from BAPs.
            allOf:
              - *ref_3
          transaction_id:
            description: >-
              This is a unique value which persists across all API calls from
              `search` through `confirm`. This is done to indicate an active
              user session across multiple requests. The BPPs can use this value
              to push personalized recommendations, and dynamic offerings
              related to an ongoing transaction despite being unaware of the
              user active on the BAP.
            type: string
            format: uuid
          message_id:
            description: >-
              This is a unique value which persists during a request / callback
              cycle. Since beckn protocol APIs are asynchronous, BAPs need a
              common value to match an incoming callback from a BPP to an
              earlier call. This value can also be used to ignore duplicate
              messages coming from the BPP. It is recommended to generate a
              fresh message_id for every new interaction. When sending
              unsolicited callbacks, BPPs must generate a new message_id.
            type: string
            format: uuid
          timestamp:
            description: Time of request generation in RFC3339 format
            type: string
            format: date-time
          key:
            description: The encryption public key of the sender
            type: string
          ttl:
            description: >-
              The duration in ISO8601 format after timestamp for which this
              message holds valid
            type: string
      - properties:
          action:
            enum:
              - confirm
        required:
          - action
  message:
    type: object
    properties:
      order:
        description: >-
          Describes a legal purchase order. It contains the complete details of
          the legal contract created between the buyer and the seller.
        type: object
        properties:
          id:
            type: string
            description: >-
              Human-readable ID of the order. This is generated at the BPP
              layer. The BPP can either generate order id within its system or
              forward the order ID created at the provider level.
          ref_order_ids:
            description: A list of order IDs to link this order to previous orders.
            type: array
            items:
              type: string
              description: ID of a previous order
          status:
            description: >-
              Status of the order. Allowed values can be defined by the network
              policy
            type: string
            enum:
              - ACTIVE
              - COMPLETE
              - CANCELLED
          type:
            description: >-
              This is used to indicate the type of order being created to BPPs.
              Sometimes orders can be linked to previous orders, like a
              replacement order in a retail domain. A follow-up consultation in
              healthcare domain. A single order part of a subscription order.
              The list of order types can be standardized at the network level.
            type: string
            default: DEFAULT
            enum:
              - DRAFT
              - DEFAULT
          provider:
            description: Details of the provider whose catalog items have been selected.
            allOf:
              - description: Describes the catalog of a business.
                type: object
                properties:
                  id:
                    type: string
                    description: Id of the provider
                  descriptor: *ref_4
                  category_id:
                    type: string
                    description: Category Id of the provider at the BPP-level catalog
                  rating: *ref_5
                  time: &ref_8
                    description: >-
                      Describes time in its various forms. It can be a single
                      point in time; duration; or a structured timetable of
                      operations<br>This has properties like label, time
                      stamp,duration,range, days, schedule
                    type: object
                    properties:
                      label:
                        type: string
                      timestamp:
                        type: string
                        format: date-time
                      duration: &ref_6
                        description: Describes duration as per ISO8601 format
                        type: string
                      range:
                        type: object
                        properties:
                          start:
                            type: string
                            format: date-time
                          end:
                            type: string
                            format: date-time
                      days:
                        type: string
                        description: comma separated values representing days of the week
                      schedule:
                        description: >-
                          Describes schedule as a repeating time period used to
                          describe a regularly recurring event. At a minimum a
                          schedule will specify frequency which describes the
                          interval between occurrences of the event. Additional
                          information can be provided to specify the schedule
                          more precisely. This includes identifying the
                          timestamps(s) of when the event will take place.
                          Schedules may also have holidays to exclude a specific
                          day from the schedule.<br>This has properties like
                          frequency, holidays, times
                        type: object
                        properties:
                          frequency: *ref_6
                          holidays:
                            type: array
                            items:
                              type: string
                              format: date-time
                          times:
                            type: array
                            items:
                              type: string
                              format: date-time
                  categories:
                    type: array
                    items:
                      description: >-
                        A label under which a collection of items can be
                        grouped.
                      type: object
                      properties:
                        id: &ref_7
                          description: ID of the category
                          type: string
                        parent_category_id: *ref_7
                        descriptor: *ref_4
                        time: *ref_8
                        ttl:
                          description: Time to live for an instance of this schema
                        tags:
                          type: array
                          items: &ref_10
                            description: >-
                              A collection of tag objects with group level
                              attributes. For detailed documentation on the Tags
                              and Tag Groups schema go to
                              https://github.com/beckn/protocol-specifications/discussions/316
                            type: object
                            properties:
                              display:
                                description: >-
                                  Indicates the display properties of the tag
                                  group. If display is set to false, then the
                                  group will not be displayed. If it is set to
                                  true, it should be displayed. However,
                                  group-level display properties can be
                                  overriden by individual tag-level display
                                  property. As this schema is purely for catalog
                                  display purposes, it is not recommended to
                                  send this value during search.
                                type: boolean
                                default: true
                              descriptor:
                                description: >-
                                  Description of the TagGroup, can be used to
                                  store detailed information.
                                allOf:
                                  - *ref_4
                              list:
                                description: >-
                                  An array of Tag objects listed under this
                                  group. This property can be set by BAPs during
                                  search to narrow the `search` and achieve more
                                  relevant results. When received during
                                  `on_search`, BAPs must render this list under
                                  the heading described by the `name` property
                                  of this schema.
                                type: array
                                items:
                                  description: >-
                                    Describes a tag. This is used to contain
                                    extended metadata. This object can be added
                                    as a property to any schema to describe
                                    extended attributes. For BAPs, tags can be
                                    sent during search to optimize and filter
                                    search results. BPPs can use tags to index
                                    their catalog to allow better search
                                    functionality. Tags are sent by the BPP as
                                    part of the catalog response in the
                                    `on_search` callback. Tags are also meant
                                    for display purposes. Upon receiving a tag,
                                    BAPs are meant to render them as name-value
                                    pairs. This is particularly useful when
                                    rendering tabular information about a
                                    product or service.
                                  type: object
                                  properties:
                                    descriptor:
                                      description: >-
                                        Description of the Tag, can be used to
                                        store detailed information.
                                      allOf:
                                        - *ref_4
                                    value:
                                      description: >-
                                        The value of the tag. This set by the
                                        BPP and rendered as-is by the BAP.
                                      type: string
                                    display:
                                      description: >-
                                        This value indicates if the tag is
                                        intended for display purposes. If set to
                                        `true`, then this tag must be displayed.
                                        If it is set to `false`, it should not
                                        be displayed. This value can override
                                        the group display value.
                                      type: boolean
                  fulfillments:
                    type: array
                    items: &ref_31
                      description: >-
                        Describes how a an order will be rendered/fulfilled to
                        the end-customer
                      type: object
                      properties:
                        id: &ref_22
                          description: Unique reference ID to the fulfillment of an order
                          type: string
                        type:
                          description: >-
                            A code that describes the mode of fulfillment. This
                            is typically set when there are multiple ways an
                            order can be fulfilled. For example, a retail order
                            can be fulfilled either via store pickup or a home
                            delivery. Similarly, a medical consultation can be
                            provided either in-person or via tele-consultation.
                            The network policy must publish standard fulfillment
                            type codes for the different modes of fulfillment.
                          type: string
                        rateable:
                          description: Whether the fulfillment can be rated or not
                          type: boolean
                        rating:
                          description: The rating value of the fulfullment service.
                          allOf:
                            - *ref_5
                        state:
                          description: >-
                            The current state of fulfillment. The BPP must set
                            this value whenever the state of the order
                            fulfillment changes and fire an unsolicited
                            `on_status` call.
                          allOf:
                            - &ref_25
                              description: Describes the state of fulfillment
                              type: object
                              properties:
                                descriptor: *ref_4
                                updated_at:
                                  type: string
                                  format: date-time
                                updated_by:
                                  type: string
                                  description: ID of entity which changed the state
                        tracking:
                          type: boolean
                          description: Indicates whether the fulfillment allows tracking
                          default: false
                        customer:
                          description: The person that will ultimately receive the order
                          allOf:
                            - description: >-
                                Describes a customer buying/availing a product
                                or a service
                              type: object
                              properties:
                                person: &ref_11
                                  description: Describes a person as any individual
                                  type: object
                                  properties:
                                    id:
                                      type: string
                                      description: Describes the identity of the person
                                    url:
                                      description: Profile url of the person
                                      type: string
                                      format: uri
                                    name:
                                      description: the name of the person
                                      type: string
                                    image: *ref_9
                                    age:
                                      description: Age of the person
                                      allOf:
                                        - *ref_6
                                    dob:
                                      description: Date of birth of the person
                                      type: string
                                      format: date
                                    gender:
                                      type: string
                                      description: >-
                                        Gender of something, typically a Person,
                                        but possibly also fictional characters,
                                        animals, etc. While Male and Female may
                                        be used, text strings are also
                                        acceptable for people who do not
                                        identify as a binary gender.Allowed
                                        values for this field can be published
                                        in the network policy
                                    creds:
                                      type: array
                                      items:
                                        description: >-
                                          Describes a credential of an entity -
                                          Person or Organization
                                        type: object
                                        properties:
                                          id:
                                            type: string
                                          type:
                                            type: string
                                            default: VerifiableCredential
                                          url:
                                            description: URL of the credential
                                            type: string
                                            format: uri
                                    languages:
                                      type: array
                                      items:
                                        description: >-
                                          Describes a language known to the
                                          person.
                                        type: object
                                        properties:
                                          code:
                                            type: string
                                          name:
                                            type: string
                                    skills:
                                      type: array
                                      items:
                                        description: Describes a skill of the person.
                                        type: object
                                        properties:
                                          code:
                                            type: string
                                          name:
                                            type: string
                                    tags:
                                      type: array
                                      items: *ref_10
                                contact: &ref_12
                                  description: >-
                                    Describes the contact information of an
                                    entity
                                  type: object
                                  properties:
                                    phone:
                                      type: string
                                    email:
                                      type: string
                                    jcard:
                                      type: object
                                      description: >-
                                        A Jcard object as per
                                        draft-ietf-jcardcal-jcard-03
                                        specification
                        agent:
                          description: >-
                            The agent that is currently handling the fulfillment
                            of the order
                          allOf:
                            - description: >-
                                Describes the direct performer, driver or
                                executor that fulfills an order. It is usually a
                                person. But in some rare cases, it could be a
                                non-living entity like a drone, or a bot. Some
                                examples of agents are Doctor in the healthcare
                                sector, a driver in the mobility sector, or a
                                delivery person in the logistics sector. This
                                object can be set at any stage of the order
                                lifecycle. This can be set at the discovery
                                stage when the BPP wants to provide details on
                                the agent fulfilling the order, like in
                                healthcare, where the doctor's name appears
                                during search. This object can also used to
                                search for a particular person that the customer
                                wants fulfilling an order. Sometimes, this
                                object gets instantiated after the order is
                                confirmed, like in the case of on-demand taxis,
                                where the driver is assigned after the user
                                confirms the ride.
                              properties:
                                person: *ref_11
                                contact: *ref_12
                                organization: &ref_20
                                  description: >-
                                    An organization. Usually a recognized
                                    business entity.
                                  type: object
                                  properties:
                                    descriptor: *ref_4
                                    address:
                                      description: The postal address of the organization
                                      allOf:
                                        - *ref_13
                                    state:
                                      description: >-
                                        The state where the organization's
                                        address is registered
                                      allOf:
                                        - *ref_14
                                    city:
                                      description: >-
                                        The city where the the organization's
                                        address is registered
                                      allOf:
                                        - *ref_15
                                    contact: *ref_12
                                rating: *ref_5
                        contact: *ref_12
                        vehicle:
                          description: >-
                            Describes a vehicle is a device that is designed or
                            used to transport people or cargo over land, water,
                            air, or through space.<br>This has properties like
                            category, capacity, make, model,
                            size,variant,color,energy_type,registration
                          type: object
                          properties:
                            category:
                              type: string
                            capacity:
                              type: integer
                            make:
                              type: string
                            model:
                              type: string
                            size:
                              type: string
                            variant:
                              type: string
                            color:
                              type: string
                            energy_type:
                              type: string
                            registration:
                              type: string
                            wheels_count:
                              type: string
                            cargo_volumne:
                              type: string
                            wheelchair_access:
                              type: string
                            code:
                              type: string
                            emission_standard:
                              type: string
                        stops:
                          description: >-
                            The list of logical stops encountered during the
                            fulfillment of an order.
                          type: array
                          items:
                            description: >-
                              A logical point in space and time during the
                              fulfillment of an order.
                            type: object
                            properties:
                              id:
                                type: string
                              parent_stop_id:
                                type: string
                              location:
                                description: Location of the stop
                                allOf:
                                  - *ref_16
                              type:
                                description: >-
                                  The type of stop. Allowed values of this
                                  property can be defined by the network policy.
                                type: string
                              time:
                                description: Timings applicable at the stop.
                                allOf:
                                  - *ref_8
                              instructions:
                                description: >-
                                  Instructions that need to be followed at the
                                  stop
                                allOf:
                                  - *ref_4
                              contact:
                                description: Contact details of the stop
                                allOf:
                                  - *ref_12
                              person:
                                description: The details of the person present at the stop
                                allOf:
                                  - *ref_11
                              authorization:
                                description: >-
                                  Describes an authorization mechanism used to
                                  start or end the fulfillment of an order. For
                                  example, in the mobility sector, the driver
                                  may require a one-time password to initiate
                                  the ride. In the healthcare sector, a patient
                                  may need to provide a password to open a video
                                  conference link during a teleconsultation.
                                type: object
                                properties:
                                  type:
                                    description: >-
                                      Type of authorization mechanism used. The
                                      allowed values for this field can be
                                      published as part of the network policy.
                                    type: string
                                  token:
                                    description: >-
                                      Token used for authorization. This is
                                      typically generated at the BPP. The BAP
                                      can send this value to the user via any
                                      channel that it uses to authenticate the
                                      user like SMS, Email, Push notification,
                                      or in-app rendering.
                                    type: string
                                  valid_from:
                                    description: >-
                                      Timestamp in RFC3339 format from which
                                      token is valid
                                    type: string
                                    format: date-time
                                  valid_to:
                                    description: >-
                                      Timestamp in RFC3339 format until which
                                      token is valid
                                    type: string
                                    format: date-time
                                  status:
                                    description: Status of the token
                                    type: string
                        path:
                          description: >-
                            The physical path taken by the agent that can be
                            rendered on a map. The allowed format of this
                            property can be set by the network.
                          type: string
                        tags:
                          type: array
                          items: *ref_10
                  payments:
                    type: array
                    items: &ref_36
                      description: >-
                        Describes the terms of settlement between the BAP and
                        the BPP for a single transaction. When instantiated,
                        this object contains <ol><li>the amount that has to be
                        settled,</li><li>The payment destination destination
                        details</li><li>When the settlement should happen,
                        and</li><li>A transaction reference ID</li></ol>. During
                        a transaction, the BPP reserves the right to decide the
                        terms of payment. However, the BAP can send its terms to
                        the BPP first. If the BPP does not agree to those terms,
                        it must overwrite the terms and return them to the BAP.
                        If overridden, the BAP must either agree to the terms
                        sent by the BPP in order to preserve the provider's
                        autonomy, or abort the transaction. In case of such
                        disagreements, the BAP and the BPP can perform offline
                        negotiations on the payment terms. Once an agreement is
                        reached, the BAP and BPP can resume transactions.
                      type: object
                      properties:
                        id: &ref_23
                          description: >-
                            ID of the payment term that can be referred at an
                            item or an order level in a catalog
                          type: string
                        collected_by:
                          description: >-
                            This field indicates who is the collector of
                            payment. The BAP can set this value to 'bap' if it
                            wants to collect the payment first and  settle it to
                            the BPP. If the BPP agrees to those terms, the BPP
                            should not send the payment url. Alternatively, the
                            BPP can set this field with the value 'bpp' if it
                            wants the payment to be made directly.
                        url:
                          type: string
                          description: >-
                            A payment url to be called by the BAP. If empty,
                            then the payment is to be done offline. The details
                            of payment should be present in the params object.
                            If tl_method = http/get, then the payment details
                            will be sent as url params. Two url param values,
                            ```$transaction_id``` and ```$amount``` are
                            mandatory.
                          format: uri
                        params:
                          type: object
                          properties:
                            transaction_id:
                              type: string
                              description: >-
                                The reference transaction ID associated with a
                                payment activity
                            amount:
                              type: string
                            currency:
                              type: string
                            bank_code:
                              type: string
                            bank_account_number:
                              type: string
                            virtual_payment_address:
                              type: string
                            source_bank_code:
                              type: string
                            source_bank_account_number:
                              type: string
                            source_virtual_payment_address:
                              type: string
                        type:
                          type: string
                          enum:
                            - PRE-ORDER
                            - PRE-FULFILLMENT
                            - ON-FULFILLMENT
                            - POST-FULFILLMENT
                        status:
                          type: string
                          enum:
                            - PAID
                            - NOT-PAID
                        time: *ref_8
                        tags:
                          type: array
                          items: *ref_10
                  locations:
                    type: array
                    items: *ref_16
                  offers:
                    type: array
                    items: &ref_30
                      description: >-
                        An offer associated with a catalog. This is typically
                        used to promote a particular product and enable more
                        purchases.
                      type: object
                      properties:
                        id:
                          type: string
                        descriptor: *ref_4
                        location_ids:
                          type: array
                          items: *ref_17
                        category_ids:
                          type: array
                          items: *ref_7
                        item_ids:
                          type: array
                          items: &ref_18
                            description: ID of the item.
                            type: string
                        time: *ref_8
                        tags:
                          type: array
                          items: *ref_10
                  items:
                    type: array
                    items: &ref_28
                      description: >-
                        Describes a product or a service offered to the end
                        consumer by the provider. In the mobility sector, it can
                        represent a fare product like one way journey. In the
                        logistics sector, it can represent the delivery service
                        offering. In the retail domain it can represent a
                        product like a grocery item.
                      type: object
                      properties:
                        id: *ref_18
                        parent_item_id:
                          description: ID of the item, this item is a variant of
                          allOf:
                            - *ref_18
                        parent_item_quantity:
                          description: >-
                            The number of units of the parent item this item is
                            a multiple of
                          allOf:
                            - &ref_21
                              description: Describes the count or amount of an item
                              type: object
                              properties:
                                allocated:
                                  description: >-
                                    This represents the exact quantity allocated
                                    for purchase of the item.
                                  type: object
                                  properties:
                                    count:
                                      type: integer
                                      minimum: 0
                                    measure: *ref_19
                                available:
                                  description: >-
                                    This represents the exact quantity available
                                    for purchase of the item. The buyer can only
                                    purchase multiples of this
                                  type: object
                                  properties:
                                    count:
                                      type: integer
                                      minimum: 0
                                    measure: *ref_19
                                maximum:
                                  description: >-
                                    This represents the maximum quantity allowed
                                    for purchase of the item
                                  type: object
                                  properties:
                                    count:
                                      type: integer
                                      minimum: 1
                                    measure: *ref_19
                                minimum:
                                  description: >-
                                    This represents the minimum quantity allowed
                                    for purchase of the item
                                  type: object
                                  properties:
                                    count:
                                      type: integer
                                      minimum: 0
                                    measure: *ref_19
                                selected:
                                  description: >-
                                    This represents the quantity selected for
                                    purchase of the item
                                  type: object
                                  properties:
                                    count:
                                      type: integer
                                      minimum: 0
                                    measure: *ref_19
                                unitized:
                                  description: >-
                                    This represents the quantity available in a
                                    single unit of the item
                                  type: object
                                  properties:
                                    count:
                                      type: integer
                                      minimum: 1
                                      maximum: 1
                                    measure: *ref_19
                        descriptor:
                          description: Physical description of the item
                          allOf:
                            - *ref_4
                        creator:
                          description: The creator of this item
                          allOf:
                            - *ref_20
                        price:
                          description: The price of this item, if it has intrinsic value
                          allOf:
                            - &ref_24
                              description: Describes the price of a product or service
                              type: object
                              properties:
                                currency:
                                  type: string
                                value: *ref_1
                                estimated_value: *ref_1
                                computed_value: *ref_1
                                listed_value: *ref_1
                                offered_value: *ref_1
                                minimum_value: *ref_1
                                maximum_value: *ref_1
                        quantity:
                          description: The selling quantity of the item
                          allOf:
                            - *ref_21
                        category_ids:
                          description: Categories this item can be listed under
                          type: array
                          items:
                            allOf:
                              - *ref_7
                        fulfillment_ids:
                          description: Modes through which this item can be fulfilled
                          type: array
                          items:
                            allOf:
                              - *ref_22
                        location_ids:
                          description: Provider Locations this item is available in
                          type: array
                          items:
                            allOf:
                              - *ref_17
                        payment_ids:
                          description: >-
                            Payment modalities through which this item can be
                            ordered
                          type: array
                          items:
                            allOf:
                              - *ref_23
                        add_ons:
                          type: array
                          items: &ref_29
                            description: >-
                              Describes an additional item offered as a
                              value-addition to a product or service. This does
                              not exist independently in a catalog and is always
                              associated with an item.
                            type: object
                            properties:
                              id:
                                description: Provider-defined ID of the add-on
                                type: string
                              descriptor: *ref_4
                              price: *ref_24
                        cancellation_terms:
                          description: Cancellation terms of this item
                          type: array
                          items: &ref_32
                            description: >-
                              Describes the cancellation terms of an item or an
                              order. This can be referenced at an item or order
                              level. Item-level cancellation terms can override
                              the terms at the order level.
                            type: object
                            properties:
                              fulfillment_state:
                                description: >-
                                  The state of fulfillment during which this
                                  term is applicable.
                                allOf:
                                  - *ref_25
                              reason_required:
                                description: >-
                                  Indicates whether a reason is required to
                                  cancel the order
                                type: boolean
                              cancel_by:
                                description: >-
                                  Information related to the time of
                                  cancellation.
                                allOf:
                                  - *ref_8
                              cancellation_fee:
                                description: A fee applied on a particular entity
                                type: object
                                properties:
                                  percentage:
                                    description: Percentage of a value
                                    allOf:
                                      - *ref_1
                                  amount:
                                    description: A fixed value
                                    allOf:
                                      - *ref_24
                              xinput: &ref_27
                                description: >-
                                  Contains any additional or extended inputs
                                  required to confirm an order. This is
                                  typically a Form Input. Sometimes, selection
                                  of catalog elements is not enough for the BPP
                                  to confirm an order. For example, to confirm a
                                  flight ticket, the airline requires details of
                                  the passengers along with information on
                                  baggage, identity, in addition to the class of
                                  ticket. Similarly, a logistics company may
                                  require details on the nature of shipment in
                                  order to confirm the shipping. A recruiting
                                  firm may require additional details on the
                                  applicant in order to confirm a job
                                  application. For all such purposes, the BPP
                                  can choose to send this object attached to any
                                  object in the catalog that is required to be
                                  sent while placing the order. This object can
                                  typically be sent at an item level or at the
                                  order level. The item level XInput will
                                  override the Order level XInput as it
                                  indicates a special requirement of information
                                  for that particular item. Hence the BAP must
                                  render a separate form for the Item and
                                  another form at the Order level before
                                  confirmation.
                                type: object
                                properties:
                                  form:
                                    description: Describes a form
                                    type: object
                                    properties:
                                      url:
                                        description: >-
                                          The URL from where the form can be
                                          fetched. The content fetched from the
                                          url must be processed as per the
                                          mime_type specified in this object. Once
                                          fetched, the rendering platform can
                                          choosed to render the form as-is as an
                                          embeddable element; or process it
                                          further to blend with the theme of the
                                          application. In case the interface is
                                          non-visual, the the render can process
                                          the form data and reproduce it as per
                                          the standard specified in the form.
                                        type: string
                                        format: uri
                                      data:
                                        description: The form submission data
                                        type: object
                                        additionalProperties:
                                          type: string
                                      mime_type:
                                        description: >-
                                          This field indicates the nature and
                                          format of the form received by querying
                                          the url. MIME types are defined and
                                          standardized in IETF's RFC 6838.
                                        type: string
                                        enum:
                                          - text/html
                                          - application/xml
                                      submission_id:
                                        type: string
                                        format: uuid
                                  required:
                                    description: >-
                                      Indicates whether the form data is
                                      mandatorily required by the BPP to confirm
                                      the order.
                                    type: boolean
                              external_ref: *ref_26
                        refund_terms:
                          description: Refund terms of this item
                          type: array
                          items: &ref_33
                            description: Refund term of an item or an order
                            type: object
                            properties:
                              fulfillment_state:
                                description: >-
                                  The state of fulfillment during which this
                                  term is applicable.
                                allOf:
                                  - *ref_14
                              refund_eligible:
                                description: >-
                                  Indicates if cancellation will result in a
                                  refund
                                type: boolean
                              refund_within:
                                description: >-
                                  Time within which refund will be processed
                                  after successful cancellation.
                                allOf:
                                  - *ref_8
                              refund_amount: *ref_24
                        replacement_terms:
                          description: >-
                            Terms that are applicable be met when this item is
                            replaced
                          type: array
                          items: &ref_34
                            description: The replacement policy of an item or an order
                            type: object
                            properties:
                              fulfillment_state:
                                description: >-
                                  The state of fulfillment during which this
                                  term is applicable.
                                allOf:
                                  - *ref_14
                              replace_within:
                                description: >-
                                  Applicable only for buyer managed returns
                                  where the buyer has to replace the item before
                                  a certain date-time, failing which they will
                                  not be eligible for replacement
                                allOf:
                                  - *ref_8
                              external_ref: *ref_26
                        return_terms:
                          description: Terms that are applicable when this item is returned
                          type: array
                          items: &ref_35
                            description: Describes the return policy of an item or an order
                            type: object
                            properties:
                              fulfillment_state:
                                description: >-
                                  The state of fulfillment during which this
                                  term IETF''s applicable.
                                allOf:
                                  - *ref_14
                              return_eligible:
                                description: >-
                                  Indicates whether the item is eligible for
                                  return
                                type: boolean
                              return_time:
                                description: >-
                                  Applicable only for buyer managed returns
                                  where the buyer has to return the item to the
                                  origin before a certain date-time, failing
                                  which they will not be eligible for refund.
                                allOf:
                                  - *ref_8
                              return_location:
                                description: >-
                                  The location where the item or order must /
                                  will be returned to
                                allOf:
                                  - *ref_16
                              fulfillment_managed_by:
                                description: The entity that will perform the return
                                type: string
                                enum:
                                  - CONSUMER
                                  - PROVIDER
                        xinput:
                          description: >-
                            Additional input required from the customer to
                            purchase / avail this item
                          allOf:
                            - *ref_27
                        time:
                          description: >-
                            Temporal attributes of this item. This property is
                            used when the item exists on the catalog only for a
                            limited period of time.
                          allOf:
                            - *ref_8
                        rateable:
                          description: Whether this item can be rated
                          type: boolean
                        rating:
                          description: The rating of the item
                          allOf:
                            - *ref_5
                        matched:
                          description: Whether this item is an exact match of the request
                          type: boolean
                        related:
                          description: >-
                            Whether this item is a related item to the exactly
                            matched item
                          type: boolean
                        recommended:
                          description: >-
                            Whether this item is a recommended item to a
                            response
                          type: boolean
                        ttl:
                          description: >-
                            Time to live in seconds for an instance of this
                            schema
                          type: string
                        tags:
                          type: array
                          items: *ref_10
                  exp:
                    type: string
                    description: Time after which catalog has to be refreshed
                    format: date-time
                  rateable:
                    description: Whether this provider can be rated or not
                    type: boolean
                  ttl:
                    description: >-
                      The time-to-live in seconds, for this object. This can be
                      overriden at deeper levels. A value of -1 indicates that
                      this object is not cacheable.
                    type: integer
                    minimum: -1
                  tags:
                    type: array
                    items: *ref_10
          items:
            description: The items purchased / availed in this order
            type: array
            items: *ref_28
          add_ons:
            description: The add-ons purchased / availed in this order
            type: array
            items: *ref_29
          offers:
            description: The offers applied in this order
            type: array
            items: *ref_30
          billing:
            description: The billing details of this order
            allOf:
              - description: >-
                  Describes the billing details of an entity.<br>This has
                  properties like
                  name,organization,address,email,phone,time,tax_number,
                  created_at,updated_at
                type: object
                properties:
                  name:
                    description: Name of the billable entity
                    type: string
                  organization:
                    description: Details of the organization being billed.
                    allOf:
                      - *ref_20
                  address:
                    description: The address of the billable entity
                    allOf:
                      - *ref_13
                  state:
                    description: >-
                      The state where the billable entity resides. This is
                      important for state-level tax calculation
                    allOf:
                      - *ref_14
                  city:
                    description: The city where the billable entity resides.
                    allOf:
                      - *ref_15
                  email:
                    description: Email address where the bill is sent to
                    type: string
                    format: email
                  phone:
                    description: Phone number of the billable entity
                    type: string
                  time:
                    description: Details regarding the billing period
                    allOf:
                      - *ref_8
                  tax_id:
                    description: >-
                      ID of the billable entity as recognized by the taxation
                      authority
                    type: string
          fulfillments:
            description: The fulfillments involved in completing this order
            type: array
            items: *ref_31
          cancellation:
            description: The cancellation details of this order
            allOf:
              - description: Describes a cancellation event
                type: object
                properties:
                  time:
                    description: Date-time when the order was cancelled by the buyer
                    type: string
                    format: date-time
                  cancelled_by:
                    type: string
                    enum:
                      - CONSUMER
                      - PROVIDER
                  reason:
                    description: The reason for cancellation
                    allOf:
                      - description: Describes a selectable option
                        type: object
                        properties:
                          id:
                            type: string
                          descriptor: *ref_4
                  additional_description:
                    description: >-
                      Any additional information regarding the nature of
                      cancellation
                    allOf:
                      - *ref_4
          cancellation_terms:
            description: Cancellation terms of this item
            type: array
            items: *ref_32
          refund_terms:
            description: Refund terms of this item
            type: array
            items: *ref_33
          replacement_terms:
            description: Replacement terms of this item
            type: array
            items: *ref_34
          return_terms:
            description: Return terms of this item
            type: array
            items: *ref_35
          quote:
            description: The mutually agreed upon quotation for this order.
            allOf:
              - description: >-
                  Describes a quote. It is the estimated price of products or
                  services from the BPP.<br>This has properties like price,
                  breakup, ttl
                type: object
                properties:
                  id:
                    description: ID of the quote.
                    type: string
                    format: uuid
                  price:
                    description: The total quoted price
                    allOf:
                      - *ref_24
                  breakup:
                    description: the breakup of the total quoted price
                    type: array
                    items:
                      type: object
                      properties:
                        item: *ref_28
                        title:
                          type: string
                        price: *ref_24
                  ttl: *ref_6
          payments:
            description: The terms of settlement for this order
            type: array
            items: *ref_36
          created_at:
            description: The date-time of creation of this order
            type: string
            format: date-time
          updated_at:
            description: The date-time of updated of this order
            type: string
            format: date-time
          xinput:
            description: Additional input required from the customer to confirm this order
            allOf:
              - *ref_27
          tags:
            type: array
            items: *ref_10
    required:
      - order
required:
  - context
  - message
